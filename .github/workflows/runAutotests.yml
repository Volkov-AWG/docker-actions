name: Autotests worker

on: push

jobs:
  before_env:
    timeout-minutes: 20
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Create docker net
        run: docker network create --driver=bridge --subnet=10.10.0.0/16  test_net
      - name: Run MONGO container
        run: docker-compose -f ./.github/workflows/components/mongo/docker-compose.yml up -d
      - name: Run POSTGRES container
        run: docker-compose -f ./.github/workflows/components/postgres/docker-compose.yml up -d
      - name: Run KAFKA container
        run: docker-compose -f ./.github/workflows/components/kafka/docker-compose.yml up -d
      - name: Run MAUNTEBANK container
        run: docker-compose -f ./.github/workflows/components/mauntebank/docker-compose.yml up -d
      - name: Get info about docker net
        run: docker network inspect test_net
